---
title: "Causal Inference for Computational Social Science"
subtitle: "V-DEM EDA for PGM"
author: 
  - name: "Troy Cheng, Hongzhe Wang"
    email: yc1317@georgetown.edu
    affiliation: Georgetown University
    corresponding: true
df-print: kable
title-block-banner: "#0a0e1a"
title-block-banner-color: "#4DB8FF"
execute:
  warning: false
date: 2025-07-23
date-modified: last-modified
format:
  html:
    embed-resources: true
    toc: true                 
    toc-title: "Contents"     
    toc-location: right       
    number-sections: true
    number-depth: 3       
    smooth-scroll: true       
    css: troystyle.css 
    code-overflow: wrap
include-in-header:
  text: |
    <link rel="shortcut icon" href="assets/gu.ico" type="image/x-icon">           
highlight-style: nord       
engine: knitr
---

# Introduction

This project is a practice of causal inference, aiming to complete the journey from correlation to causation in empirical social science research. The study investigates macro-political transformations—particularly regime changes—through a causal lens grounded in computational methods. The analysis relies on [the Varieties of Democracy (V-Dem) dataset](https://github.com/vdeminstitute/vdemdata), one of the most comprehensive global sources on political regimes and democratic institutions. Covering nearly every country from the 18th century to the present, V-Dem provides detailed yearly indicators across political, economic, and social dimensions, allowing for the historical tracking of institutional change.

In terms of motivation, this project was initiated in response to the comprehensive shocks (cultural, political, etc.) experienced by a Chinese international student upon arriving in the United States. Speaking broken English and surrounded by sarcastic remarks stemming from ["banana discourse"](https://en.wikipedia.org/wiki/Banana,_coconut,_and_Twinkie), the experience prompted reflection on the root causes of the present situation and, more broadly, the structural contest between the social systems of China and the United States. The project seeks to find some kind of scientific conclusion through data and empirical research. Although such clarity is difficult to achieve in the social sciences, where mischievous atoms always lurk, the hope is to apply causal inference techniques to eliminate bias and pursue a theoretically grounded and relatively objective exploration.

The analysis is guided by four core research questions:

  1. RQ1: What kinds of factors cause a country to undergo a regime change?
  2. RQ2: What factors influence the establishment of communist regimes?
  3. RQ3: What factors contribute to the collapse of communist regimes?
  4. RQ4: What factors explain the long-term survival of the remaining communist regimes (China, Cuba, Laos, North Korea, and Vietnam)?

These questions are explored through a combination of longitudinal data analysis and logistic modeling, with particular attention to causality and temporal ordering. Special emphasis is placed on the interplay between regime types and structural factors such as inequality, civil conflict, elite coordination, and education levels, in order to identify plausible causal pathways.


# RQ1: What kinds of factors cause a country to undergo a regime change?

This section explores the historical predictors of regime change using V-Dem's country-year panel data, covering over 200 years and nearly all sovereign states. We operationalize regime change based on transitions in the `histname` field and use logistic regression to assess whether various political, structural, and conflict-related variables can significantly predict the likelihood of a regime shift.

## Import Data and Load Packages

```{r}
# Install V-Dem data package:
# install.packages("devtools")
# devtools::install_github("vdeminstitute/vdemdata")

library(vdemdata)
library(tidyverse)
library(effects)
library(stringr)
```


## Create Regime Change Variable

We define regime change as a change in the `histname` field within a country across years.

```{r}
vdem_1 <- vdem |> 
  arrange(country_id, year) |> 
  group_by(country_id) |> 
  mutate(regime_change = if_else(histname != lag(histname), 1, 0, missing = 0)) |> 
  ungroup()

regime_transitions <- vdem_1 |> 
  arrange(country_id, year) |> 
  group_by(country_id) |> 
  mutate(
    previous_histname = lag(histname),
    current_histname = histname
  ) |> 
  filter(regime_change == 1) |> 
  select(country_id, country_name, year, previous_histname, current_histname) |> 
  ungroup()
```

## Naive Logit Model with Political Indicators

We first test a simple model using three high-level indices:
- `v2x_corr`: Control of corruption
- `v2x_polyarchy`: Electoral democracy index
- `v2x_freexp_altinf`: Freedom of alternative sources of information

```{r}
vdem_model <- vdem_1 |> 
  arrange(country_id, year) |> 
  group_by(country_id) |> 
  mutate(
    v2x_corr_lag1 = lag(v2x_corr, 1),
    v2x_polyarchy_lag1 = lag(v2x_polyarchy, 1),
    v2x_freexp_altinf_lag1 = lag(v2x_freexp_altinf, 1)
  ) |> 
  ungroup()

model1 <- glm(regime_change ~ v2x_corr_lag1 + v2x_polyarchy_lag1 + v2x_freexp_altinf_lag1,
              data = vdem_model,
              family = binomial(link = "logit"))
summary(model1)
```

## Structural and Background Factors Model

We expand the model to include structural and conflict variables:
- `e_gdppc`: GDP per capita
- `e_peaveduc`: Education level (15+)
- `e_civil_war`: Civil war dummy
- `e_pt_coup`: Number of coup attempts

```{r}
vdem_model1 <- vdem_model |>
  arrange(country_id, year) |>
  group_by(country_id) |>
  mutate(
    e_gdppc_lag1 = lag(e_gdppc),
    e_peaveduc_lag1 = lag(e_peaveduc),
    e_civil_war_lag1 = lag(e_civil_war),
    e_pt_coup_lag1 = lag(e_pt_coup),
    e_total_oil_income_pc_lag1 = lag(e_total_oil_income_pc)
  ) |>
  ungroup()

model_bg <- glm(regime_change ~ 
                  v2x_polyarchy_lag1 + 
                  e_gdppc_lag1 + 
                  e_civil_war_lag1 + 
                  e_pt_coup_lag1 + 
                  e_peaveduc_lag1,
                data = vdem_model1,
                family = binomial(link = "logit"))
summary(model_bg)
```

## Visualizing Marginal Effects

```{r}
plot(allEffects(model1))
plot(allEffects(model_bg))
```

## Interpretation

Initial results suggest that lower levels of electoral democracy and active civil conflict significantly increase the likelihood of regime change. However, economic indicators such as GDP and education do not appear to have strong predictive power in this specification.

---

# RQ2: What factors influence the establishment of communist regimes?

```{r}

regime_transitions |>
  filter(str_detect(current_histname, "People's Republic") |
         str_detect(current_histname, "Socialist Republic") |
         str_detect(current_histname, "Socialist") |
         str_detect(current_histname, "Soviet") |
         str_detect(current_histname, "Democratic People's Republic")) |>
  arrange(year)


communist_keywords <- c("People's Republic", "Socialist Republic", "Socialist", "Soviet", "Democratic People's Republic", "People's Democratic Republic")

regime_transitions |>
  filter(str_detect(current_histname, str_c(communist_keywords, collapse = "|"))) |>
  arrange(country_id, year) |>
  group_by(country_id) |>
  slice_min(year, n = 1) |> 
  ungroup() |>
  arrange(year)

```



Georgia Soviet Socialist Republic缺失政体建立前后时期的数据


**Next Steps**:
We will next turn to more specific questions:

- What factors explain the formation of communist regimes?
- What causes communist regimes to collapse?
- What drives capitalist regimes to transition into communism?

We will construct new binary regime-type indicators to address these questions in subsequent models.


# RQ3: What factors contribute to the collapse of communist regimes?


# RQ4: What factors explain the long-term survival of the remaining communist regimes (China, Cuba, Laos, North Korea, and Vietnam)?





# EDA

## Test function in `vdemdata` package

```{r}
vdemdata::plot_indicator("v2msuffrage")

# Plot V-Dem indicators liberal democracy and egalitarian democracy
# for Sweden and Germany between 1912 and 2000.

plot_indicator(indicator=c( "v2x_egaldem", "v2x_libdem"), countries = c("Germany", "Sweden"),
                     min_year = 1912, max_year = 2000)
```

## What country do we have?

```{r}
unique(vdem$country_name)
```


Pick out German, Russia and China

```{r}
selected_data <- vdem |>
  filter(country_text_id %in% c("DEU", "RUS", "CHN")) |>
  select(where(~ !any(is.na(.))))

```

```{r}

selected_data |>
  group_by(country_text_id) |>
  summarize(
    years_available = sum(!is.na(v2csreprss)),
    year_min = min(year[!is.na(v2csreprss)]),
    year_max = max(year[!is.na(v2csreprss)])
  )


```

```{r}
ggplot(selected_data, aes(x = year, y = v2csreprss, color = country_text_id)) +
  geom_point() +
  labs(
    title = "CSO Repression Over Time (V-Dem v2csreprss)",
    x = "Year",
    y = "Civil Society Repression",
    color = "Country"
  ) +
  scale_color_manual(
    values = c("DEU" = "black", "RUS" = "red", "CHN" = "blue"),
    labels = c("Germany", "Russia", "China")
  ) +
  theme_minimal()


```





```{=html}
<script>
document.addEventListener("DOMContentLoaded", function() {
    const toc = document.getElementById("TOC");
    if (toc) {
        const sourceLink = document.createElement("div");
        sourceLink.innerHTML = `
            <div class="toc-source">
                <a href="https://github.com/troy-yu-cheng/causalinference-finalproj" 
                   target="_blank" 
                   class="github-button">
                   <svg xmlns="http://www.w3.org/2000/svg" 
                        viewBox="0 0 24 24" 
                        width="16" 
                        height="16" 
                        fill="currentColor"
                        style="vertical-align: middle; margin-right: 5px;">
                     <path d="M12 0C5.373 0 0 5.373 0 12c0 5.303 3.438 9.8 8.207 11.387.6.113.82-.26.82-.577v-2.157c-3.338.726-4.033-1.416-4.033-1.416-.546-1.386-1.332-1.756-1.332-1.756-1.09-.745.083-.73.083-.73 1.205.084 1.84 1.237 1.84 1.237 1.07 1.832 2.807 1.303 3.492.996.108-.774.418-1.303.76-1.602-2.665-.3-5.466-1.332-5.466-5.93 0-1.311.468-2.382 1.237-3.222-.124-.302-.536-1.52.118-3.163 0 0 1.008-.322 3.3 1.23a11.516 11.516 0 0 1 3.002-.403 11.486 11.486 0 0 1 3.002.403c2.292-1.552 3.3-1.23 3.3-1.23.654 1.644.242 2.861.118 3.163.77.84 1.236 1.911 1.236 3.222 0 4.61-2.807 5.627-5.48 5.922.43.372.812 1.103.812 2.222v3.293c0 .321.218.694.825.576C20.565 21.796 24 17.3 24 12 24 5.373 18.627 0 12 0z"/>
                   </svg>
                   View source
                </a>
            </div>
        `;
        toc.appendChild(sourceLink);
    }
});
</script>
```
